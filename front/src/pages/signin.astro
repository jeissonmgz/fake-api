---
import Layout from "../layouts/Layout.astro";
import Input from "../components/Input.astro";
import Button from "../components/Button.astro";

export const prerender = true;

const { cookies, redirect } = Astro;

const accessToken = cookies.get("sb-access-token");
const refreshToken = cookies.get("sb-refresh-token");

if (accessToken && refreshToken) {
  return redirect("/dashboard");
}
---

<Layout title="Login">
  <h1>Login</h1>
  <p><a href="/register">Create account</a></p>
  <form action="/api/auth/signin" method="post" class="flex flex-col gap-2">
    <label for="email">Email</label>
    <Input type="email" name="email" />
    <label for="password">Password</label>
    <Input type="password" name="password" />
    <Button type="submit">
      Login
    </Button>
  </form>
</Layout>